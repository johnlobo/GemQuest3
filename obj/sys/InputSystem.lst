                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.8 #9946 (Mac OS X x86_64)
                              4 ;--------------------------------------------------------
                              5 	.module InputSystem
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _sys_input_update
                             12 	.globl _sys_input_init
                             13 	.globl _man_player_get_player
                             14 	.globl _cpct_isKeyPressed
                             15 ;--------------------------------------------------------
                             16 ; special function registers
                             17 ;--------------------------------------------------------
                             18 ;--------------------------------------------------------
                             19 ; ram data
                             20 ;--------------------------------------------------------
                             21 	.area _DATA
                             22 ;--------------------------------------------------------
                             23 ; ram data
                             24 ;--------------------------------------------------------
                             25 	.area _INITIALIZED
                             26 ;--------------------------------------------------------
                             27 ; absolute external ram data
                             28 ;--------------------------------------------------------
                             29 	.area _DABS (ABS)
                             30 ;--------------------------------------------------------
                             31 ; global & static initialisations
                             32 ;--------------------------------------------------------
                             33 	.area _HOME
                             34 	.area _GSINIT
                             35 	.area _GSFINAL
                             36 	.area _GSINIT
                             37 ;--------------------------------------------------------
                             38 ; Home
                             39 ;--------------------------------------------------------
                             40 	.area _HOME
                             41 	.area _HOME
                             42 ;--------------------------------------------------------
                             43 ; code
                             44 ;--------------------------------------------------------
                             45 	.area _CODE
                             46 ;src/sys/InputSystem.c:22: void sys_input_init() {
                             47 ;	---------------------------------
                             48 ; Function sys_input_init
                             49 ; ---------------------------------
   0000                      50 _sys_input_init::
                             51 ;src/sys/InputSystem.c:24: }
   0000 C9            [10]   52 	ret
                             53 ;src/sys/InputSystem.c:26: void sys_input_update() {
                             54 ;	---------------------------------
                             55 ; Function sys_input_update
                             56 ; ---------------------------------
   0001                      57 _sys_input_update::
                             58 ;src/sys/InputSystem.c:27: TPlayer *player = man_player_get_player(0);
   0001 AF            [ 4]   59 	xor	a, a
   0002 F5            [11]   60 	push	af
   0003 33            [ 6]   61 	inc	sp
   0004 CDr00r00      [17]   62 	call	_man_player_get_player
   0007 33            [ 6]   63 	inc	sp
   0008 4D            [ 4]   64 	ld	c, l
   0009 44            [ 4]   65 	ld	b, h
                             66 ;src/sys/InputSystem.c:29: if (cpct_isKeyPressed(keys1.left)) {
   000A 2Ar04r00      [16]   67 	ld	hl, (#(_keys1 + 0x0004) + 0)
   000D C5            [11]   68 	push	bc
   000E CDr00r00      [17]   69 	call	_cpct_isKeyPressed
   0011 C1            [10]   70 	pop	bc
   0012 7D            [ 4]   71 	ld	a, l
   0013 B7            [ 4]   72 	or	a, a
   0014 28 07         [12]   73 	jr	Z,00102$
                             74 ;src/sys/InputSystem.c:30: player->x = player->x - 1;
   0016 21 17 00      [10]   75 	ld	hl, #0x0017
   0019 09            [11]   76 	add	hl, bc
   001A 5E            [ 7]   77 	ld	e, (hl)
   001B 1D            [ 4]   78 	dec	e
   001C 73            [ 7]   79 	ld	(hl), e
   001D                      80 00102$:
                             81 ;src/sys/InputSystem.c:32: if (cpct_isKeyPressed(keys1.right)) {
   001D 2Ar06r00      [16]   82 	ld	hl, (#(_keys1 + 0x0006) + 0)
   0020 C5            [11]   83 	push	bc
   0021 CDr00r00      [17]   84 	call	_cpct_isKeyPressed
   0024 C1            [10]   85 	pop	bc
   0025 7D            [ 4]   86 	ld	a, l
   0026 B7            [ 4]   87 	or	a, a
   0027 28 07         [12]   88 	jr	Z,00104$
                             89 ;src/sys/InputSystem.c:33: player->x = player->x + 1;
   0029 21 17 00      [10]   90 	ld	hl, #0x0017
   002C 09            [11]   91 	add	hl, bc
   002D 5E            [ 7]   92 	ld	e, (hl)
   002E 1C            [ 4]   93 	inc	e
   002F 73            [ 7]   94 	ld	(hl), e
   0030                      95 00104$:
                             96 ;src/sys/InputSystem.c:35: if (cpct_isKeyPressed(keys1.up)) {
   0030 2Ar00r00      [16]   97 	ld	hl, (#_keys1 + 0)
   0033 C5            [11]   98 	push	bc
   0034 CDr00r00      [17]   99 	call	_cpct_isKeyPressed
   0037 C1            [10]  100 	pop	bc
   0038 7D            [ 4]  101 	ld	a, l
   0039 B7            [ 4]  102 	or	a, a
   003A 28 07         [12]  103 	jr	Z,00106$
                            104 ;src/sys/InputSystem.c:36: player->y = player->y - 1;
   003C 21 18 00      [10]  105 	ld	hl, #0x0018
   003F 09            [11]  106 	add	hl, bc
   0040 5E            [ 7]  107 	ld	e, (hl)
   0041 1D            [ 4]  108 	dec	e
   0042 73            [ 7]  109 	ld	(hl), e
   0043                     110 00106$:
                            111 ;src/sys/InputSystem.c:38: if (cpct_isKeyPressed(keys1.down)) {
   0043 2Ar02r00      [16]  112 	ld	hl, (#(_keys1 + 0x0002) + 0)
   0046 C5            [11]  113 	push	bc
   0047 CDr00r00      [17]  114 	call	_cpct_isKeyPressed
   004A C1            [10]  115 	pop	bc
   004B 7D            [ 4]  116 	ld	a, l
   004C B7            [ 4]  117 	or	a, a
   004D C8            [11]  118 	ret	Z
                            119 ;src/sys/InputSystem.c:39: player->y = player->y + 1;
   004E 21 18 00      [10]  120 	ld	hl, #0x0018
   0051 09            [11]  121 	add	hl, bc
   0052 4E            [ 7]  122 	ld	c, (hl)
   0053 0C            [ 4]  123 	inc	c
   0054 71            [ 7]  124 	ld	(hl), c
   0055 C9            [10]  125 	ret
                            126 	.area _CODE
                            127 	.area _INITIALIZER
                            128 	.area _CABS (ABS)
