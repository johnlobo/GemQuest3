                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.8 #9946 (Mac OS X x86_64)
                              4 ;--------------------------------------------------------
                              5 	.module keyboard
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _cpct_isAnyKeyPressed_f
                             12 	.globl _cpct_isAnyKeyPressed
                             13 	.globl _cpct_isKeyPressed
                             14 	.globl _cpct_scanKeyboard_f
                             15 	.globl _cpct_memcpy
                             16 	.globl _keys2VS
                             17 	.globl _keys1VS
                             18 	.globl _keysSINGLE
                             19 	.globl _initKeys
                             20 	.globl _wait4OneKey
                             21 	.globl _wait4UserKeypress
                             22 	.globl _waitKeyUp
                             23 ;--------------------------------------------------------
                             24 ; special function registers
                             25 ;--------------------------------------------------------
                             26 ;--------------------------------------------------------
                             27 ; ram data
                             28 ;--------------------------------------------------------
                             29 	.area _DATA
                             30 ;--------------------------------------------------------
                             31 ; ram data
                             32 ;--------------------------------------------------------
                             33 	.area _INITIALIZED
                             34 ;--------------------------------------------------------
                             35 ; absolute external ram data
                             36 ;--------------------------------------------------------
                             37 	.area _DABS (ABS)
                             38 ;--------------------------------------------------------
                             39 ; global & static initialisations
                             40 ;--------------------------------------------------------
                             41 	.area _HOME
                             42 	.area _GSINIT
                             43 	.area _GSFINAL
                             44 	.area _GSINIT
                             45 ;--------------------------------------------------------
                             46 ; Home
                             47 ;--------------------------------------------------------
                             48 	.area _HOME
                             49 	.area _HOME
                             50 ;--------------------------------------------------------
                             51 ; code
                             52 ;--------------------------------------------------------
                             53 	.area _CODE
                             54 ;src/keyboard/keyboard.c:48: void initKeys(u8 type)
                             55 ;	---------------------------------
                             56 ; Function initKeys
                             57 ; ---------------------------------
   0000                      58 _initKeys::
   0000 DD E5         [15]   59 	push	ix
   0002 DD 21 00 00   [14]   60 	ld	ix,#0
   0006 DD 39         [15]   61 	add	ix,sp
                             62 ;src/keyboard/keyboard.c:50: if (type == SINGLE){
   0008 DD 7E 04      [19]   63 	ld	a, 4 (ix)
   000B B7            [ 4]   64 	or	a, a
   000C 20 11         [12]   65 	jr	NZ,00102$
                             66 ;src/keyboard/keyboard.c:51: cpct_memcpy(&keys1, &keysSINGLE, sizeof(TKeys));
   000E 21 1F 00      [10]   67 	ld	hl, #0x001f
   0011 E5            [11]   68 	push	hl
   0012 21r40r00      [10]   69 	ld	hl, #_keysSINGLE
   0015 E5            [11]   70 	push	hl
   0016 21r00r00      [10]   71 	ld	hl, #_keys1
   0019 E5            [11]   72 	push	hl
   001A CDr00r00      [17]   73 	call	_cpct_memcpy
   001D 18 1E         [12]   74 	jr	00104$
   001F                      75 00102$:
                             76 ;src/keyboard/keyboard.c:53: cpct_memcpy(&keys1, &keys1VS, sizeof(TKeys));
   001F 21 1F 00      [10]   77 	ld	hl, #0x001f
   0022 E5            [11]   78 	push	hl
   0023 21r5Fr00      [10]   79 	ld	hl, #_keys1VS
   0026 E5            [11]   80 	push	hl
   0027 21r00r00      [10]   81 	ld	hl, #_keys1
   002A E5            [11]   82 	push	hl
   002B CDr00r00      [17]   83 	call	_cpct_memcpy
                             84 ;src/keyboard/keyboard.c:54: cpct_memcpy(&keys2, &keys2VS, sizeof(TKeys));
   002E 21 1F 00      [10]   85 	ld	hl, #0x001f
   0031 E5            [11]   86 	push	hl
   0032 21r7Er00      [10]   87 	ld	hl, #_keys2VS
   0035 E5            [11]   88 	push	hl
   0036 21r00r00      [10]   89 	ld	hl, #_keys2
   0039 E5            [11]   90 	push	hl
   003A CDr00r00      [17]   91 	call	_cpct_memcpy
   003D                      92 00104$:
   003D DD E1         [14]   93 	pop	ix
   003F C9            [10]   94 	ret
   0040                      95 _keysSINGLE:
   0040 08 08                96 	.dw #0x0808
   0042 08 20                97 	.dw #0x2008
   0044 04 04                98 	.dw #0x0404
   0046 03 08                99 	.dw #0x0803
   0048 05 80               100 	.dw #0x8005
   004A 00 40               101 	.dw #0x4000
   004C 09 01               102 	.dw #0x0109
   004E 09 02               103 	.dw #0x0209
   0050 09 04               104 	.dw #0x0409
   0052 09 08               105 	.dw #0x0809
   0054 09 10               106 	.dw #0x1009
   0056 09 20               107 	.dw #0x2009
   0058 05 10               108 	.dw #0x1005
   005A 08 04               109 	.dw #0x0408
   005C 04 40               110 	.dw #0x4004
   005E 00                  111 	.db #0x00	; 0
   005F                     112 _keys1VS:
   005F 04 08               113 	.dw #0x0804
   0061 04 20               114 	.dw #0x2004
   0063 05 20               115 	.dw #0x2005
   0065 04 10               116 	.dw #0x1004
   0067 05 04               117 	.dw #0x0405
   0069 04 04               118 	.dw #0x0404
   006B 09 01               119 	.dw #0x0109
   006D 09 02               120 	.dw #0x0209
   006F 09 04               121 	.dw #0x0409
   0071 09 08               122 	.dw #0x0809
   0073 09 10               123 	.dw #0x1009
   0075 09 20               124 	.dw #0x2009
   0077 05 10               125 	.dw #0x1005
   0079 08 04               126 	.dw #0x0408
   007B 04 40               127 	.dw #0x4004
   007D 00                  128 	.db #0x00	; 0
   007E                     129 _keys2VS:
   007E 07 08               130 	.dw #0x0807
   0080 07 10               131 	.dw #0x1007
   0082 08 20               132 	.dw #0x2008
   0084 07 20               133 	.dw #0x2007
   0086 08 08               134 	.dw #0x0808
   0088 07 04               135 	.dw #0x0407
   008A 06 01               136 	.dw #0x0106
   008C 06 02               137 	.dw #0x0206
   008E 06 04               138 	.dw #0x0406
   0090 06 08               139 	.dw #0x0806
   0092 06 10               140 	.dw #0x1006
   0094 06 20               141 	.dw #0x2006
   0096 05 10               142 	.dw #0x1005
   0098 08 04               143 	.dw #0x0408
   009A 04 40               144 	.dw #0x4004
   009C 00                  145 	.db #0x00	; 0
                            146 ;src/keyboard/keyboard.c:67: void wait4OneKey()
                            147 ;	---------------------------------
                            148 ; Function wait4OneKey
                            149 ; ---------------------------------
   009D                     150 _wait4OneKey::
                            151 ;src/keyboard/keyboard.c:70: while (cpct_isAnyKeyPressed());
   009D                     152 00101$:
   009D CDr00r00      [17]  153 	call	_cpct_isAnyKeyPressed
   00A0 7D            [ 4]  154 	ld	a, l
   00A1 B7            [ 4]  155 	or	a, a
   00A2 20 F9         [12]  156 	jr	NZ,00101$
                            157 ;src/keyboard/keyboard.c:73: while (!cpct_isAnyKeyPressed());
   00A4                     158 00104$:
   00A4 CDr00r00      [17]  159 	call	_cpct_isAnyKeyPressed
   00A7 7D            [ 4]  160 	ld	a, l
   00A8 B7            [ 4]  161 	or	a, a
   00A9 28 F9         [12]  162 	jr	Z,00104$
                            163 ;src/keyboard/keyboard.c:75: return;
   00AB C9            [10]  164 	ret
                            165 ;src/keyboard/keyboard.c:86: u32 wait4UserKeypress()
                            166 ;	---------------------------------
                            167 ; Function wait4UserKeypress
                            168 ; ---------------------------------
   00AC                     169 _wait4UserKeypress::
                            170 ;src/keyboard/keyboard.c:91: do
   00AC 21 00 00      [10]  171 	ld	hl,#0x0000
   00AF 5D            [ 4]  172 	ld	e,l
   00B0 54            [ 4]  173 	ld	d,h
   00B1                     174 00101$:
                            175 ;src/keyboard/keyboard.c:93: c++;                   // One more cycle
   00B1 2C            [ 4]  176 	inc	l
   00B2 20 07         [12]  177 	jr	NZ,00115$
   00B4 24            [ 4]  178 	inc	h
   00B5 20 04         [12]  179 	jr	NZ,00115$
   00B7 1C            [ 4]  180 	inc	e
   00B8 20 01         [12]  181 	jr	NZ,00115$
   00BA 14            [ 4]  182 	inc	d
   00BB                     183 00115$:
                            184 ;src/keyboard/keyboard.c:94: cpct_scanKeyboard_f(); // Scan the scan the keyboard
   00BB E5            [11]  185 	push	hl
   00BC D5            [11]  186 	push	de
   00BD CDr00r00      [17]  187 	call	_cpct_scanKeyboard_f
   00C0 CDr00r00      [17]  188 	call	_cpct_isAnyKeyPressed_f
   00C3 7D            [ 4]  189 	ld	a, l
   00C4 D1            [10]  190 	pop	de
   00C5 E1            [10]  191 	pop	hl
   00C6 B7            [ 4]  192 	or	a, a
   00C7 28 E8         [12]  193 	jr	Z,00101$
                            194 ;src/keyboard/keyboard.c:97: return c;
   00C9 C9            [10]  195 	ret
                            196 ;src/keyboard/keyboard.c:108: void waitKeyUp(cpct_keyID key) 
                            197 ;	---------------------------------
                            198 ; Function waitKeyUp
                            199 ; ---------------------------------
   00CA                     200 _waitKeyUp::
                            201 ;src/keyboard/keyboard.c:111: while (cpct_isKeyPressed(key))
   00CA                     202 00101$:
   00CA C1            [10]  203 	pop	bc
   00CB E1            [10]  204 	pop	hl
   00CC E5            [11]  205 	push	hl
   00CD C5            [11]  206 	push	bc
   00CE CDr00r00      [17]  207 	call	_cpct_isKeyPressed
   00D1 7D            [ 4]  208 	ld	a, l
   00D2 B7            [ 4]  209 	or	a, a
   00D3 C8            [11]  210 	ret	Z
                            211 ;src/keyboard/keyboard.c:113: cpct_scanKeyboard_f();
   00D4 CDr00r00      [17]  212 	call	_cpct_scanKeyboard_f
   00D7 18 F1         [12]  213 	jr	00101$
                            214 	.area _CODE
                            215 	.area _INITIALIZER
                            216 	.area _CABS (ABS)
